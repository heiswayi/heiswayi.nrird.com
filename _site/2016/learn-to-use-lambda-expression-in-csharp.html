<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" class="no-js" itemscope itemtype="http://schema.org/WebPage"><link href="http://gmpg.org/xfn/11" rel="profile"><meta charset="UTF-8"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"><title> Learn to use Lambda Expression in C# · heiswayi nrird •••</title><meta name="description" content=" Lambda expression helps me to write coding faster and shorter in C#. Let&#39;s learn how we can use lambda expressions, delegates, predicates and closures. "/><meta name="keywords" content="lambda expressions, c# programming, anonymous functions, lambda operator, c# delegates, c# predicates, c# closures"><meta name="author" content="Heiswayi Nrird"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta property="og:type" content="article"><meta property="article:author" content="Heiswayi Nrird"><meta property="article:section" content=""><meta property="article:tag" content="lambda expressions, c# programming, anonymous functions, lambda operator, c# delegates, c# predicates, c# closures"><meta property="article:published_time" content="2016-11-27 00:00:00 +0800"><meta property="og:url" content="https://heiswayi.nrird.com/2016/learn-to-use-lambda-expression-in-csharp"><meta property="og:title" content=" Learn to use Lambda Expression in C# · heiswayi nrird ••• "><meta property="og:image" content="https://heiswayi.nrird.com/assets/logo.png"><meta property="og:description" content=" Lambda expression helps me to write coding faster and shorter in C#. Let&#39;s learn how we can use lambda expressions, delegates, predicates and closures. "><meta property="og:site_name" content="Heiswayi Nrird"><meta property="og:locale" content="en_US"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@heiswayi"><meta name="twitter:title" content=" Learn to use Lambda Expression in C# · heiswayi nrird ••• "><meta name="twitter:description" content=" Lambda expression helps me to write coding faster and shorter in C#. Let&#39;s learn how we can use lambda expressions, delegates, predicates and closures. "><meta name="twitter:image:src" content="https://heiswayi.nrird.com/assets/logo.png"><meta itemprop="name" content=" Learn to use Lambda Expression in C# · heiswayi nrird ••• "><meta itemprop="description" content=" Lambda expression helps me to write coding faster and shorter in C#. Let&#39;s learn how we can use lambda expressions, delegates, predicates and closures. "><meta itemprop="image" content="https://heiswayi.nrird.com/assets/logo.png"><link rel="canonical" href="https://heiswayi.nrird.com/2016/learn-to-use-lambda-expression-in-csharp"><link rel="alternate" type="application/rss+xml" title="RSS" href="https://heiswayi.nrird.com/feed.xml"><link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo="><link rel="stylesheet" href="https://heiswayi.nrird.com/assets/css/main.css?20180603"> <script src="https://heiswayi.nrird.com/assets/js/modernizr.custom.js"></script> <!--[if lt IE 9]> <script src="http://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script> <script src="http://cdnjs.cloudflare.com/ajax/libs/respond.js/1.1.0/respond.min.js"></script> <script src="https://heiswayi.nrird.com/assets/js/rem.min.js"></script> <![endif]--> <a href="#content" class="skip">Skip to content</a><div class="wrap"><div class="masthead"> <canvas id="canvas" style="width:100%;height:100%;max-height:230px;position:absolute;z-index:1;opacity:0.5"></canvas><div class="container"><h2 class="masthead-title"> <a href="https://heiswayi.nrird.com" title="heiswayi nrird •••" class="title">heiswayi nrird <span class="dot-red">•</span><span class="dot-yellow">•</span><span class="dot-green">•</span></a> <small>Between coding and random stuffs </small></h2><div class="footer-social-links"> <a href="http://heiswayi.github.io/feed.xml" title="RSS Feed" target="_blank"><i class="fa fa-rss"></i></a> <a href="https://my.linkedin.com/in/nrird" title="LinkedIn" target="_blank"><i class="fa fa-linkedin"></i></a> <!--<a href="https://www.facebook.com/heiswayi.nrird" title="Facebook" target="_blank"><i class="fa fa-facebook"></i></a>--> <!--<a href="https://twitter.com/HeiswayiNrird" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a>--> <a href="http://heiswayi.github.io/my-repos/" title="GitHub Repositories" target="_blank"><i class="fa fa-github-alt"></i></a> <a href="http://heiswayi.github.io/my-gists/" title="GitHub Gists" target="_blank"><i class="fa fa-code"></i></a> <a href="http://codepen.io/heiswayi/" title="CodePen" target="_blank"><i class="fa fa-codepen"></i></a> <a href="https://instagram.com/heiswayi.nrird/" title="Instagram" target="_blank"><i class="fa fa-instagram"></i></a> <a href="http://jsfiddle.net/user/heiswayi/" title="JSFiddle" target="_blank"><i class="fa fa-jsfiddle"></i></a></div><div class="nav"><ul class="top-menu"><li><a href="https://heiswayi.nrird.com/" title="Home"><i class="fa fa-home"></i></a><li><a href="https://heiswayi.nrird.com/about">About</a> <!--<li><a href="/resume">Resume <i class="fa fa-external-link-square"></i></a>--><li><a href="https://heiswayi.nrird.com/projects" class="bg-red"><i class="fa fa-space-shuttle" aria-hidden="true"></i> Projects</a><li><a href="https://heiswayi.nrird.com/tagged">Tags</a><li><a href="https://heiswayi.github.io/photography">Photography <i class="fa fa-external-link-square"></i></a><li><a href="https://heiswayi.nrird.com/reminder">Reminder</a></ul></div></div></div><div id="content" class="container content"><div class="post"><div class="post-top-meta"> <!--<div class="edit-this-page"><a href="https://github.com/heiswayi/heiswayi.github.io/blob/master/_posts/2016/2016-11-27-learn-to-use-lambda-expression-in-csharp.md">Edit this page</a></div>--><div class="post-date">November 27, 2016</div><h1 class="post-title">Learn to use Lambda Expression in C#</h1></div><h3 id="lambda-expression">Lambda expression</h3><p>Basically, a lambda expression is an anonymous function that we construct with the lambda operator <code class="highlighter-rouge">=&gt;</code>.<p>The following example will create a function that always return the integer 7:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">getSeven</span> <span class="p">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="m">7</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">numberSeven</span> <span class="p">=</span> <span class="nf">getSeven</span><span class="p">();</span>
<span class="c1">// Variable 'numberSeven' will now contain 7</span>
</code></pre></div></div><p>We also can pass parameters to the function by declaring them inside the parenthesis:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">addXandY</span> <span class="p">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">+</span> <span class="n">y</span><span class="p">;</span> <span class="c1">// x + y is expression</span>
<span class="kt">int</span> <span class="n">total</span> <span class="p">=</span> <span class="nf">addXandY</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">4</span><span class="p">);</span>
<span class="c1">// Variable 'total' will now contain 9</span>
</code></pre></div></div><p>If we have more extensive function, we can wrap the function body with curly brackets. This is called a statement lambda:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Func</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">getUnit</span> <span class="p">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="s">"kg"</span><span class="p">;</span>
<span class="n">Func</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">int</span><span class="p">,</span> <span class="kt">string</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="n">getTotalAndUnit</span> <span class="p">=</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">unit</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">_total</span> <span class="p">=</span> <span class="n">a</span> <span class="p">+</span> <span class="n">b</span><span class="p">;</span>
    <span class="k">return</span> <span class="kt">string</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="s">"Total: {0} {1}"</span><span class="p">,</span> <span class="n">_total</span><span class="p">,</span> <span class="n">unit</span><span class="p">);</span>
<span class="p">};</span>
<span class="kt">string</span> <span class="n">result</span> <span class="p">=</span> <span class="nf">getTotalAndUnit</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="nf">getUnit</span><span class="p">());</span>
<span class="c1">// Variable 'result' will now contain "Total: 15 kg"</span>
</code></pre></div></div><p>When we are using the extensive form of lambda expression and want to return a value, we will need to use the return statement just like a ordinary method.<p>I usually use the statement lambda for my event handler if there is just a simple code operation, for example:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Let's say I have a manager with singleton pattern</span>
<span class="c1">// that contains a public event property like this:</span>
<span class="k">public</span> <span class="k">event</span> <span class="n">EventHandler</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="n">OnDataPointsUpdated</span><span class="p">;</span>

<span class="c1">// Then, somewhere in my other class</span>
<span class="c1">// I subscribe the event at the class constructor.</span>
<span class="c1">// Here I just create a statement lambda for the event handler:</span>
<span class="n">AppManager</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">OnDataPointsUpdated</span> <span class="p">+=</span> <span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// e == true, update the chart.</span>
        <span class="nf">UpdateChart</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="delegate">Delegate</h3><p>A delegate is a type that represents a method signature (including parameter list and return value).<p>The following example will first create a delegate type (MathOperation), it will then create a method that match the delegate’s method signature (Add). When the method Calculate is called, it will first instantiate the delegate with the newly created method. Finally the delegate instantiation will get invoked. Thus, running the <code class="highlighter-rouge">Add</code> method:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">delegate</span> <span class="kt">double</span> <span class="nf">MathOperation</span><span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">);</span>

<span class="k">private</span> <span class="kt">double</span> <span class="nf">Add</span><span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="p">+</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Calculate</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">MathOperation</span> <span class="n">adder</span> <span class="p">=</span> <span class="n">Add</span><span class="p">;</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"The result: "</span> <span class="p">+</span> <span class="nf">adder</span><span class="p">(</span><span class="m">3445.33</span><span class="p">,</span> <span class="m">1000.65</span><span class="p">));</span>
    <span class="c1">// Will print "The result: 4445.98"</span>
<span class="p">}</span>
</code></pre></div></div><p>Delegates can be used together with anonymous methods, i.e. the method that matches the delegate’s method signature is created as we instantiate the delegate like so:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">delegate</span> <span class="kt">double</span> <span class="nf">MathOperation</span><span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">);</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">Calculate</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">MathOperation</span> <span class="n">adder</span> <span class="p">=</span> <span class="k">delegate</span><span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">a</span> <span class="p">+</span> <span class="n">b</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"The result: "</span> <span class="p">+</span> <span class="nf">adder</span><span class="p">(</span><span class="m">3445.33</span><span class="p">,</span> <span class="m">1000.65</span><span class="p">));</span>
    <span class="c1">// Will print "The result: 4445.98"</span>
<span class="p">}</span>
</code></pre></div></div><p>The anonymous method can be replaced with a lambda expression:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">MathOperation</span> <span class="n">adder</span> <span class="p">=</span> <span class="p">(</span><span class="kt">double</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">)</span> <span class="p">=&gt;</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">a</span> <span class="p">+</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="predicate">Predicate</h3><p>A predicate is a premade delegate that takes a type as well as an instance of said type and returns a Boolean value:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">delegate</span> <span class="kt">bool</span> <span class="n">Predicate</span><span class="p">&lt;</span><span class="k">in</span> <span class="n">T</span><span class="p">&gt;(</span><span class="n">T</span> <span class="n">obj</span><span class="p">);</span>
</code></pre></div></div><p>It’s used for evaluate a condition and return True/False accordingly:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Predicate</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">isEven</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">a</span> <span class="p">%</span> <span class="m">2</span> <span class="p">==</span> <span class="m">0</span><span class="p">;</span>
<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Is 3223 even: "</span> <span class="p">+</span> <span class="nf">isEven</span><span class="p">(</span><span class="m">3223</span><span class="p">));</span>
<span class="c1">// Will print "Is 3223 even: False"</span>
</code></pre></div></div><p>We will often see it in LINQ-statements where it is used for filter a sequence of values (the predicate is defined as a parameter to the <code class="highlighter-rouge">Where</code> method):<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">integers</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">};</span>
<span class="kt">var</span> <span class="n">evenNumbers</span> <span class="p">=</span> <span class="n">integers</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span> <span class="p">%</span> <span class="m">2</span> <span class="p">==</span> <span class="m">0</span><span class="p">);</span>
<span class="n">evenNumbers</span><span class="p">.</span><span class="nf">ToList</span><span class="p">().</span><span class="nf">ForEach</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">Console</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="n">p</span> <span class="p">+</span> <span class="s">" "</span><span class="p">));</span>
<span class="c1">// Will print "2 4 6 "</span>
</code></pre></div></div><h3 id="closure">Closure</h3><p>In essence, a closure is a block of code which can be executed at a later time, but which maintains the environment in which it was first created, i.e. it can still use the local variables of the method which created it, event after that method has finished executing:<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">foo</span> <span class="p">=</span> <span class="s">"Hello"</span><span class="p">;</span>
<span class="n">Func</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">myClosure</span> <span class="p">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="n">foo</span><span class="p">;</span> <span class="p">};</span>
<span class="kt">var</span> <span class="n">bar</span> <span class="p">=</span> <span class="nf">myClosure</span><span class="p">();</span>
<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">bar</span><span class="p">);</span>
<span class="c1">// Will print "Hello"</span>
</code></pre></div></div><p>As we can see in the example above, the <code class="highlighter-rouge">foo</code> variable defined in the local scope is accessible to the lambda expression, thus creating a closure.<div class="tagged"> <a href="https://heiswayi.nrird.com/tagged#lambda-expression"><i class="fa fa-hashtag muted" aria-hidden="true"></i>Lambda Expression</a> <a href="https://heiswayi.nrird.com/tagged#csharp"><i class="fa fa-hashtag muted" aria-hidden="true"></i>CSharp</a></div><div id="disqus" style="margin-top:2em"><div id="disqus_thread"></div><script> var disqus_config = function() { this.page.url = "https://heiswayi.nrird.com/2016/learn-to-use-lambda-expression-in-csharp"; this.page.identifier = "/2016/learn-to-use-lambda-expression-in-csharp"; }; (function() { var d = document, s = d.createElement('script'); s.src = '//hnbloggithub.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div></div><div class="footer"><div class="copyright"><i class="fa fa-copyright"></i> 2015 - 2018 Heiswayi Nrird // <a href="https://heiswayi.nrird.com/cookie-policy">Cookie Policy</a> // <a href="https://heiswayi.github.io/feed.xml">RSS</a></div></div><script> // Line numbering for code block (function() { var pre = document.getElementsByTagName('pre'), pl = pre.length; for (var i = 0; i < pl; i++) { pre[i].innerHTML = '<span class="line-number"></span>' + pre[i].innerHTML + '<span class="cl"></span>'; var num = pre[i].innerHTML.split(/\n/).length; for (var j = 0; j < (num - 1); j++) { var line_num = pre[i].getElementsByTagName('span')[0]; line_num.innerHTML += '<span>' + (j + 1) + '</span>'; } } })(); </script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-58296043-7', 'auto'); ga('send', 'pageview'); </script>
