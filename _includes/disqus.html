{% if page.comments %}
<div id="disqus" style="margin-top:2em">

    <div class="comments-block" style="margin-bottom:1rem">
        <button id="show-comments-button" class="button" onclick="disqus();return false;">Load Comments</button>
    </div>

    <div id="disqus_thread"></div>
    <script>
        var disqus_loaded = false;
        var disqus_shortname = '{{ site.disqus_shortname }}';
        function disqus() {
            if (!disqus_loaded)  {
                disqus_loaded = true;
                var e = document.createElement("script");
                e.type = "text/javascript";
                e.async = true;
                e.src = "//" + disqus_shortname + ".disqus.com/embed.js";
                (document.getElementsByTagName("head")[0] ||
                document.getElementsByTagName("body")[0])
                .appendChild(e);
                document.getElementById("show-comments-button").style.display = "none";
            }
        }
        var hash = window.location.hash.substr(1);
        if (hash.length > 8) {
            if (hash.substring(0, 8) == "comment-") {
                disqus();
            }
        }
        if(/bot|google|baidu|bing|msn|duckduckgo|slurp|yandex/i.test(navigator.userAgent)) {
            disqus();
        }
    </script>
    <noscript>
        {% 
            include no-js-notice.html
            message="The comment system is powered by Disqus which requires JavaScript to be enabled."
        %}
    </noscript>

</div>
{% endif %}
